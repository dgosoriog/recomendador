{% extends "layout.html" %}
{% block content %}

        <!-- Page content-->
        <div class="container-fluid">
            <h1 class="mt-4" align="center">Ingrese los siguientes datos </h1>
            <p align="center">Ingrese aqui los datos de los Estadios</p>
            <form align="center" method="POST" action="{{url_for('procesari')}}">

<div align="center" class="form-group">
                <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
                <table>
                    <tr>
                        <td></td>
                        <td align="right">Lote: </td>


                        <td><input name="lote" type="number"></td>


                    </tr></br>
                    <tr>
                        <td></td>
                        <td align="right">Variedad: </td>


                        <td><input name="variedad" type="number"></td>


                    </tr>
                    <tr>
                        <td></td>
                        <td align="right">Muestreo: </td>


                        <td><input name="muestreo" type="number"></td>


                    </tr>
                    <tr>
                        <td></td>
                        <td align="right">Ciclo: </td>


                        <td><input name="ciclo" type="number"></td>


                    </tr>

                    <tr>
                        <td>Arroz</td>
                        {% for i in range(es1) %}

                        <td><input class="expenses1"></td>
                        {% endfor %}
                        <td><input class="expenses_sum1" name="pr1" placeholder="Promedio"></td>
                    </tr>
                    <tr>
                        <td>Arveja</td>
                        {% for i in range(es2) %}

                        <td><input class="expenses2"></td>
                        {% endfor %}
                        <td><input class="expenses_sum2" name="pr2" placeholder="Promedio"></td>
                    </tr>
                    <tr>
                        <td>Garbanzo</td>
                        {% for i in range(es3) %}

                        <td><input class="expenses3"></td>
                        {% endfor %}
                        <td><input class="expenses_sum3" name="pr3" placeholder="Promedio"></td>
                    </tr>
                    <tr>
                        <td>Lenteja</td>
                        {% for i in range(es4) %}

                        <td><input class="expenses4"></td>
                        {% endfor %}
                        <td><input class="expenses_sum4" name="pr4" placeholder="Promedio"></td>
                    </tr>
                    <tr>
                        <td>PintColor</td>
                        {% for i in range(es5) %}

                        <td><input class="expenses5"></td>
                        {% endfor %}
                        <td><input class="expenses_sum5" name="pr5" placeholder="Promedio"></td>
                    </tr>
                    <tr>
                        <td>RayColor</td>
                        {% for i in range(es6) %}

                        <td><input class="expenses6"></td>
                        {% endfor %}
                        <td><input class="expenses_sum6" name="pr6" placeholder="Promedio"></td>
                    </tr>
                    <tr>
                        <td>ColorDef</td>
                        {% for i in range(es7) %}

                        <td><input class="expenses7"></td>
                        {% endfor %}
                        <td><input class="expenses_sum7" name="pr7" placeholder="Promedio"></td>
                    </tr>

                </table>
                <script>
                                            $(document).ready(function() {
                      $(".expenses1").on('keyup change', calculateSum);
                    });

                    $(document).ready(function() {
                      $(".expenses2").on('keyup change', calculateSum);
                    });
                    $(document).ready(function() {
                      $(".expenses3").on('keyup change', calculateSum);
                    });
                    $(document).ready(function() {
                      $(".expenses4").on('keyup change', calculateSum);
                    });
                    $(document).ready(function() {
                      $(".expenses5").on('keyup change', calculateSum);
                    });
                    $(document).ready(function() {
                      $(".expenses6").on('keyup change', calculateSum);
                    });
                    $(document).ready(function() {
                      $(".expenses7").on('keyup change', calculateSum);
                    });

                    function calculateSum() {
                      var $input = $(this);
                      var $row = $input.closest('tr');
                      var sum1 = 0
                      var cont1=0;

                      var sum2 = 0
                      var cont2=0;

                      var sum3 = 0
                      var cont3=0;

                      var sum4 = 0
                      var cont4=0;

                      var sum5 = 0
                      var cont5=0;

                      var sum6 = 0
                      var cont6=0;

                      var sum7 = 0
                      var cont7=0;

                      $row.find(".expenses1").each(function() {
                        sum1 += parseFloat(this.value) || 0;
                        cont1=cont1+1;

                      });
                      sum1=sum1/cont1;

                      $row.find(".expenses2").each(function() {
                        sum2 += parseFloat(this.value) || 0;
                        cont2=cont2+1;

                      });
                      sum2=sum2/cont2;

                      $row.find(".expenses3").each(function() {
                        sum3 += parseFloat(this.value) || 0;
                        cont3=cont3+1;

                      });
                      sum3=sum3/cont3;

                      $row.find(".expenses4").each(function() {
                        sum4 += parseFloat(this.value) || 0;
                        cont4=cont4+1;

                      });
                      sum4=sum4/cont4;

                      $row.find(".expenses5").each(function() {
                        sum5 += parseFloat(this.value) || 0;
                        cont5=cont5+1;

                      });
                      sum5=sum5/cont5;

                      $row.find(".expenses6").each(function() {
                        sum6 += parseFloat(this.value) || 0;
                        cont6=cont6+1;

                      });
                      sum6=sum6/cont6;

                      $row.find(".expenses7").each(function() {
                        sum7 += parseFloat(this.value) || 0;
                        cont7=cont7+1;

                      });
                      sum7=sum7/cont7;

                      $row.find(".expenses_sum1").val(sum1.toFixed(2));
                      $row.find(".expenses_sum2").val(sum2.toFixed(2));
                      $row.find(".expenses_sum3").val(sum3.toFixed(2));
                      $row.find(".expenses_sum4").val(sum4.toFixed(2));
                      $row.find(".expenses_sum5").val(sum5.toFixed(2));
                      $row.find(".expenses_sum6").val(sum6.toFixed(2));
                      $row.find(".expenses_sum7").val(sum7.toFixed(2));

                    }

                </script>

                <input type="submit" value="Enviar"></div></form>

        </div>
    </div>
</div>


{% endblock content %}
{% block footer %}
<!-- Bootstrap core JS-->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.1/dist/js/bootstrap.bundle.min.js"></script>
<!-- Core theme JS-->
<script src="static/js/scripts2.js"></script>

{% endblock footer %}