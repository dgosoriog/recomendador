<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
    <meta name="description" content="" />
    <meta name="author" content="" />
    <title>Ingreso Datos</title>
    <!-- Favicon-->
    <link rel="icon" type="image/x-icon" href="static/assets/flor.png" />
    <!-- Core theme CSS (includes Bootstrap)-->
    <link href="static/css/styles2.css" rel="stylesheet" />
</head>
<body style="background-color:#4ED33F;">

<div class="d-flex" id="wrapper">
    <!-- Sidebar-->
    <div class="border-end bg-white" id="sidebar-wrapper">
        <div class="sidebar-heading border-bottom bg-light"><img align="center" src="static/images/hoja.png" width="70">
            <br>Asistente Floricola</div>
        <div class="list-group list-group-flush">
            <a class="list-group-item list-group-item-action list-group-item-light p-3" href="/parcela"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-bezier2" viewBox="0 0 16 16">
                <path fill-rule="evenodd" d="M1 2.5A1.5 1.5 0 0 1 2.5 1h1A1.5 1.5 0 0 1 5 2.5h4.134a1 1 0 1 1 0 1h-2.01c.18.18.34.381.484.605.638.992.892 2.354.892 3.895 0 1.993.257 3.092.713 3.7.356.476.895.721 1.787.784A1.5 1.5 0 0 1 12.5 11h1a1.5 1.5 0 0 1 1.5 1.5v1a1.5 1.5 0 0 1-1.5 1.5h-1a1.5 1.5 0 0 1-1.5-1.5H6.866a1 1 0 1 1 0-1h1.711a2.839 2.839 0 0 1-.165-.2C7.743 11.407 7.5 10.007 7.5 8c0-1.46-.246-2.597-.733-3.355-.39-.605-.952-1-1.767-1.112A1.5 1.5 0 0 1 3.5 5h-1A1.5 1.5 0 0 1 1 3.5v-1zM2.5 2a.5.5 0 0 0-.5.5v1a.5.5 0 0 0 .5.5h1a.5.5 0 0 0 .5-.5v-1a.5.5 0 0 0-.5-.5h-1zm10 10a.5.5 0 0 0-.5.5v1a.5.5 0 0 0 .5.5h1a.5.5 0 0 0 .5-.5v-1a.5.5 0 0 0-.5-.5h-1z"/>
            </svg>   Ingreso de datos</a>
            <a class="list-group-item list-group-item-action list-group-item-light p-3" href="/historial"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-clock-history" viewBox="0 0 16 16">
                <path d="M8.515 1.019A7 7 0 0 0 8 1V0a8 8 0 0 1 .589.022l-.074.997zm2.004.45a7.003 7.003 0 0 0-.985-.299l.219-.976c.383.086.76.2 1.126.342l-.36.933zm1.37.71a7.01 7.01 0 0 0-.439-.27l.493-.87a8.025 8.025 0 0 1 .979.654l-.615.789a6.996 6.996 0 0 0-.418-.302zm1.834 1.79a6.99 6.99 0 0 0-.653-.796l.724-.69c.27.285.52.59.747.91l-.818.576zm.744 1.352a7.08 7.08 0 0 0-.214-.468l.893-.45a7.976 7.976 0 0 1 .45 1.088l-.95.313a7.023 7.023 0 0 0-.179-.483zm.53 2.507a6.991 6.991 0 0 0-.1-1.025l.985-.17c.067.386.106.778.116 1.17l-1 .025zm-.131 1.538c.033-.17.06-.339.081-.51l.993.123a7.957 7.957 0 0 1-.23 1.155l-.964-.267c.046-.165.086-.332.12-.501zm-.952 2.379c.184-.29.346-.594.486-.908l.914.405c-.16.36-.345.706-.555 1.038l-.845-.535zm-.964 1.205c.122-.122.239-.248.35-.378l.758.653a8.073 8.073 0 0 1-.401.432l-.707-.707z"/>
                <path d="M8 1a7 7 0 1 0 4.95 11.95l.707.707A8.001 8.001 0 1 1 8 0v1z"/>
                <path d="M7.5 3a.5.5 0 0 1 .5.5v5.21l3.248 1.856a.5.5 0 0 1-.496.868l-3.5-2A.5.5 0 0 1 7 9V3.5a.5.5 0 0 1 .5-.5z"/>
            </svg>   Historial</a>
            <a class="list-group-item list-group-item-action list-group-item-light p-3" href="#!"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-info-circle" viewBox="0 0 16 16">
                <path d="M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14zm0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16z"/>
                <path d="m8.93 6.588-2.29.287-.082.38.45.083c.294.07.352.176.288.469l-.738 3.468c-.194.897.105 1.319.808 1.319.545 0 1.178-.252 1.465-.598l.088-.416c-.2.176-.492.246-.686.246-.275 0-.375-.193-.304-.533L8.93 6.588zM9 4.5a1 1 0 1 1-2 0 1 1 0 0 1 2 0z"/>
            </svg>   Ayuda</a>
            <a class="list-group-item list-group-item-action list-group-item-light p-3" href="/logout"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-box-arrow-left" viewBox="0 0 16 16">
                <path fill-rule="evenodd" d="M6 12.5a.5.5 0 0 0 .5.5h8a.5.5 0 0 0 .5-.5v-9a.5.5 0 0 0-.5-.5h-8a.5.5 0 0 0-.5.5v2a.5.5 0 0 1-1 0v-2A1.5 1.5 0 0 1 6.5 2h8A1.5 1.5 0 0 1 16 3.5v9a1.5 1.5 0 0 1-1.5 1.5h-8A1.5 1.5 0 0 1 5 12.5v-2a.5.5 0 0 1 1 0v2z"/>
                <path fill-rule="evenodd" d="M.146 8.354a.5.5 0 0 1 0-.708l3-3a.5.5 0 1 1 .708.708L1.707 7.5H10.5a.5.5 0 0 1 0 1H1.707l2.147 2.146a.5.5 0 0 1-.708.708l-3-3z"/>
            </svg>   Salir</a>

        </div>
    </div>
    <!-- Page content wrapper-->
    <div id="page-content-wrapper">
        <!-- Top navigation-->
        <nav class="navbar navbar-expand-lg navbar-light bg-light border-bottom">
            <div class="container-fluid">
                <button class="btn btn-primary" id="sidebarToggle"><---</button>
                <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation"><span class="navbar-toggler-icon"></span></button>
                <div class="collapse navbar-collapse" id="navbarSupportedContent">

                </div>
            </div>
        </nav>
        <!-- Page content-->
        <div class="container-fluid">
            <h1 class="mt-4" align="center">Ingreso de Datos</h1>
            <p align="center">Ingrese aqu√≠ los datos de su parcela de cultivo</p>
            <form align="center" method="POST" action="">
                {{ form.hidden_tag() }}
                <div align="center" class="form-group">
                    {{ form.ph.label(class="form-control-label") }}
                    {% if form.ph.errors %}
                    {{ form.ph(class="form-control form-control-md is-invalid") }}
                    <div class="invalid-feedback">
                        {% for error in form.ph.errors %}
                            <span>{{ error }}</span>
                        {% endfor %}
                    </div>
                {% else %}

                    <div align="center" class="col-sm-3">
                        {{ form.ph(class="form-control form-control-md") }}
                    </div>
                     {% endif %}
                </div><br>
                <div align="center" class="form-group">
                    {{ form.densidad.label(class="form-control-label") }}
                    {% if form.densidad.errors %}
                    {{ form.densidad(class="form-control form-control-md is-invalid") }}
                    <div class="invalid-feedback">
                        {% for error in form.densidad.errors %}
                            <span>{{ error }}</span>
                        {% endfor %}
                    </div>
                {% else %}

                    <div align="center" class="col-sm-3">
                        {{ form.densidad(class="form-control form-control-md") }}
                    </div>
                     {% endif %}
                </div><br>

                <div align="center" class="form-group">
                    {{ form.cond_elect.label(class="form-control-label") }}
                    {% if form.cond_elect.errors %}
                    {{ form.cond_elect(class="form-control form-control-md is-invalid") }}
                    <div class="invalid-feedback">
                        {% for error in form.cond_elect.errors %}
                            <span>{{ error }}</span>
                        {% endfor %}
                    </div>
                {% else %}

                    <div align="center" class="col-sm-3">
                        {{ form.cond_elect(class="form-control form-control-md") }}
                    </div>
                     {% endif %}
                </div><br>

                <div align="center" class="form-group">
                    {{ form.fecha.label(class="form-control-label") }}
                    {% if form.fecha.errors %}
                    {{ form.fecha(class="form-control form-control-md is-invalid") }}
                    <div class="invalid-feedback">
                        {% for error in form.fecha.errors %}
                            <span>{{ error }}</span>
                        {% endfor %}
                    </div>
                {% else %}

                    <div align="center" class="col-sm-3">
                        {{ form.fecha(class="datepicker") }}
                    </div>
                     {% endif %}

<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
<table border="1">

     <tr>
      <td>Arroz</td>
                    {% for i in range(es1) %}

                <td><input class="expenses1" ></td>
                {% endfor %}
    <td><input class="expenses_sum1" name="pr1" placeholder="Promedio"></td>
  </tr>
  <tr>
      <td>Arveja</td>
                    {% for i in range(es2) %}

                <td><input class="expenses2" ></td>
                {% endfor %}
    <td><input class="expenses_sum2" name="pr2" placeholder="Promedio"></td>
  </tr>
     <tr>
      <td>Garbanzo</td>
                    {% for i in range(es3) %}

                <td><input class="expenses3" ></td>
                {% endfor %}
    <td><input class="expenses_sum3" name="pr3" placeholder="Promedio"></td>
  </tr>
    <tr>
      <td>Lenteja</td>
                    {% for i in range(es4) %}

                <td><input class="expenses4" ></td>
                {% endfor %}
    <td><input class="expenses_sum4" name="pr4" placeholder="Promedio"></td>
  </tr>
    <tr>
      <td>PintColor</td>
                    {% for i in range(es5) %}

                <td><input class="expenses5" ></td>
                {% endfor %}
    <td><input class="expenses_sum5" name="pr5" placeholder="Promedio"></td>
  </tr>
  <tr>
      <td>RayColor</td>
                    {% for i in range(es6) %}

                <td><input class="expenses6" ></td>
                {% endfor %}
    <td><input class="expenses_sum6" name="pr6" placeholder="Promedio"></td>
  </tr>
    <tr>
      <td>ColorDef</td>
                    {% for i in range(es7) %}

                <td><input class="expenses7" ></td>
                {% endfor %}
    <td><input class="expenses_sum7" name="pr7" placeholder="Promedio"></td>
  </tr>
</table>
                    <script>
                        $(document).ready(function() {
  $(".expenses1").on('keyup change', calculateSum);
});

$(document).ready(function() {
  $(".expenses2").on('keyup change', calculateSum);
});
$(document).ready(function() {
  $(".expenses3").on('keyup change', calculateSum);
});
$(document).ready(function() {
  $(".expenses4").on('keyup change', calculateSum);
});
$(document).ready(function() {
  $(".expenses5").on('keyup change', calculateSum);
});
$(document).ready(function() {
  $(".expenses6").on('keyup change', calculateSum);
});
$(document).ready(function() {
  $(".expenses7").on('keyup change', calculateSum);
});

function calculateSum() {
  var $input = $(this);
  var $row = $input.closest('tr');
  var sum1 = 0
  var cont1=0;

  var sum2 = 0
  var cont2=0;

  var sum3 = 0
  var cont3=0;

  var sum4 = 0
  var cont4=0;

  var sum5 = 0
  var cont5=0;

  var sum6 = 0
  var cont6=0;

  var sum7 = 0
  var cont7=0;

  $row.find(".expenses1").each(function() {
    sum1 += parseFloat(this.value) || 0;
    cont1=cont1+1;

  });
  sum1=sum1/cont1;

  $row.find(".expenses2").each(function() {
    sum2 += parseFloat(this.value) || 0;
    cont2=cont2+1;

  });
  sum2=sum2/cont2;

  $row.find(".expenses3").each(function() {
    sum3 += parseFloat(this.value) || 0;
    cont3=cont3+1;

  });
  sum3=sum3/cont3;

  $row.find(".expenses4").each(function() {
    sum4 += parseFloat(this.value) || 0;
    cont4=cont4+1;

  });
  sum4=sum4/cont4;

  $row.find(".expenses5").each(function() {
    sum5 += parseFloat(this.value) || 0;
    cont5=cont5+1;

  });
  sum5=sum5/cont5;

  $row.find(".expenses6").each(function() {
    sum6 += parseFloat(this.value) || 0;
    cont6=cont6+1;

  });
  sum6=sum6/cont6;

  $row.find(".expenses7").each(function() {
    sum7 += parseFloat(this.value) || 0;
    cont7=cont7+1;

  });
  sum7=sum7/cont7;

  $row.find(".expenses_sum1").val(sum1.toFixed(2));
  $row.find(".expenses_sum2").val(sum2.toFixed(2));
  $row.find(".expenses_sum3").val(sum3.toFixed(2));
  $row.find(".expenses_sum4").val(sum4.toFixed(2));
  $row.find(".expenses_sum5").val(sum5.toFixed(2));
  $row.find(".expenses_sum6").val(sum6.toFixed(2));
  $row.find(".expenses_sum7").val(sum7.toFixed(2));

}
                    </script>

                <center>{{ form.cargar(class="btn btn-primary") }}</center>
                </div></form>

        </div>
    </div>
</div>
<!-- Bootstrap core JS-->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.1/dist/js/bootstrap.bundle.min.js"></script>
<!-- Core theme JS-->
<script src="static/js/scripts2.js"></script>
</body>
</html>
