{% extends "layout.html" %}
{% block content %}
    <h1 class="mt-4" align="center">Usuarios</h1>
    <div class="row">
        <div class="col"></div>
        <div class="col-10">
        <table class="table table-success table-striped">
            <thead>
            <tr>
                <th scope="col">Nombre</th>
                <th scope="col">Apellido</th>
                <th scope="col">Correo</th>
                <th scope="col">Rol</th>
                <th scope="col">Acciones</th>
            </tr>
              </thead>
              <tbody>
              {% for r in users %}
                <tr>
                    <td>{{ r.nombre }}</td>
                    <td>{{ r.apellido }}</td>
                    <td>{{ r.email }}</td>
                    <td>{{ r.role.nombre }}</td>
                    <td>
                        <a class="btn btn-primary" href="/editar{{ r.id }}" role="button">Editar</a>
                        <a class="btn btn-danger btn-delete" href="/eliminar/{{ r.id }}" role="button">Eliminar</a>
                    </td>
                </tr>
              {% endfor %}
              </tbody>
        </table>
    </div>
        <div class="col"></div>
    </div>
        <div class="row">
            <div class="col">
                <a class="btn btn-primary" href="/nuevo" role="button">Nuevo</a>
            </div>
        </div>
{% endblock content %}
{% block footer %}
<!-- Bootstrap core JS-->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.1/dist/js/bootstrap.bundle.min.js"></script>
<!-- Core theme JS-->
<script src="static/js/scripts2.js"></script>
<script type="text/javascript">
const btnDelete= document.querySelectorAll('.btn-delete');
if(btnDelete) {
  const btnArray = Array.from(btnDelete);
  btnArray.forEach((btn) => {
    btn.addEventListener('click', (e) => {
      if(!confirm('Est√° seguro que desea eliminar este usuario?')){
        e.preventDefault();
      }
    });
  })
}
</script>
{% endblock footer%}